<style>

  .madlib {
    background-color: pink;
    padding: 20px;
    font-family: sans-serif;
    font-size: 5vw;
  }

</style>

<div class="madlib"></div>

<button class="button">madlib</button>

<script>
  
  function countInstances (string, word) {
   return string.split(word).length - 1;
	}
	
  const madlib = document.querySelector('.madlib')
  const button = document.querySelector('.button')

  const ingVerbs = ['walking', 'dancing', 'cooking', 'crying', 'shopping', 'laughing', 'knitting', 
                    'snorkeling', 'singing', 'cleaning', 'cheering', 'curling', 'bobsledding', 
                    'skipping', 'flying']
  const courses = ['Media Aesthetics', 'Internet Art', 'Self, Culture, and Society', 'General Chemistry', 
                   'Principles of Microeconomics', 'Philosophical Perspectives']
  const adjectives = ['yellow', 'dry', 'old', 'dirty', 'clear', 'green', 'metal', 'small', 
                      'ambitious', 'oily']
  const nouns = ['shoes', 'octopi', 'cans', 'phones', 'chocolates', 'pencils', 'shirts', 'chopsticks', 
                   'napkins', 'plates']
  const edVerbs = ['walked', 'danced', 'cooked', 'cried', 'shopped', 'laughed', 'knit', 'snorkeled', 
                   'sang', 'cleaned', 'cheered', 'curled', 'bobsled', 'skipped', 'flied']
  const feelings = ['happy', 'sad', 'excited', 'scared', 'worried', 'dazed', 'enraged', 'depresed', 
                    'scared', 'overjoyed']
  const people = ['Dean Boyer', 'Professor Briz', 'Dean Nandorf', 'President Alivisatos',
                  'Professor Satrom', 'Professor Jagoda']
  const places = ['the Reg', 'Harper', 'Woodlawn', 'Crerar', 'Plein Air', 'Mansueto', 'Rockefeller Chapel']
  
  // const madlib1 = 'I was {{-ing verb}} in {{course}} when all of a sudden I looked around and saw {{adj}} {{pl noun}} all around me! I was {{feeling}} because the professor was still {{-ing verb}}. What a {{adj}} day of class...'
  // const madlib2 = 'I {{-ed verb}} around campus today. I decided to enter {{place}} to do homework. Suddenly, {{person}} appeared and took my homework! I tried to tell my professor, but they became {{feeling}}. Oh well...'
  
  const genIngVerbs = []
  const genCourses = []
  const genAdjectives = []
  const genNouns = []
  const genEdVerbs = []
  const genFeelings = []
  const genPeople = []
  const genPlaces = []
  
  const madlibs = ['I was {{-ing verb}} in {{course}} when all of a sudden I looked around and saw {{adj}} {{pl noun}} all around me! I was {{feeling}} because the professor was still {{-ing verb}}. What a {{adj}} day of class...',
                   'I {{-ed verb}} around campus today. I decided to enter {{place}} to do homework. Suddenly, {{person}} appeared and took my homework! I tried to tell my professor, but they became {{feeling}}. Oh well...']
  let chosenML = madlibs[1]
  
  function randomItem (arr) {
    const n = Math.floor(Math.random() * arr.length)
    return arr[n]
  }
  
  function showWords () {
    const numIngVerbs = countInstances(chosenML, '{{-ing verb}}')
    const numCourses = countInstances(chosenML, '{{pl noun}}')
    const numAdjectives = countInstances(chosenML, '{{-ing verb}}')
    const numNouns = countInstances(chosenML, '{{-ing verb}}')
    const numEdVerbs = countInstances(chosenML, '{{-ing verb}}')
    const numFeelings = countInstances(chosenML, '{{-ing verb}}')
    const numPeople = countInstances(chosenML, '{{-ing verb}}')
		const numPlaces = countInstances(chosenML, '{{place}}')
    
    for (let i = 0; i < numIngVerbs; i++) {
			const ingVerb = randomItem(ingVerbs)
      genIngVerbs.push(ingVerb)
    }
    
    for (let i = 0; i < numCourses; i++) {
			const course = randomItem(courses)
      genCourses.push(course)
    }
    
    for (let i = 0; i < numAdjectives; i++) {
			const adj = randomItem(adjectives)
      genAdjectives.push(adj)
    }
    
    for (let i = 0; i < numNouns; i++) {
			const noun = randomItem(nouns)
      genNouns.push(noun)
    }
    
    for (let i = 0; i < numEdVerbs; i++) {
			const edVerb = randomItem(edVerbs)
      genEdVerbs.push(edVerb)
    }
    
    for (let i = 0; i < numFeelings; i++) {
			const feeling = randomItem(feelings)
      genFeelings.push(feeling)
    }
    
    for (let i = 0; i < numPeople; i++) {
			const person = randomItem(people)
      genPeople.push(person)
    }
    
    for (let i = 0; i < numPlaces; i++) {
			const place = randomItem(places)
      genPlaces.push(place)
    }
    
    madlib.textcontent = chosenML
    
    button.onclick = showMadLib
  }
  
  function showMadLib () {
    
    for (let a = 0; a < genIngVerbs.length; a++) {
			chosenML = chosenML.replace('{{-ing verb}}', genIngVerbs[a])
    }
    
    for (let b = 0; b < genCourses.length; b++) {
			chosenML = chosenML.replace('{{course}}', genCourses[b])
    }
    
    for (let c = 0; c < genAdjectives.length; c++) {
			chosenML = chosenML.replace('{{adj}}', genAdjectives[c])
    }
    
    for (let d = 0; d < genNouns.length; d++) {
			chosenML = chosenML.replace('{{pl noun}}', genNouns[d])
    }
    
    for (let e = 0; e < genEdVerbs.length; e++) {
			chosenML = chosenML.replace('{{-ed verb}}', genEdVerbs[e])
    }
    
    for (let f = 0; f < genFeelings.length; f++) {
			chosenML = chosenML.replace('{{feeling}}', genFeelings[f])
    }
    
    for (let g = 0; g < genPeople.length; g++) {
			chosenML = chosenML.replace('{{person}}', genPeople[g])
    }
    
    for (let h = 0; h < genPlaces.length; h++) {
			chosenML = chosenML.replace('{{place}}', genPlaces[h])
    }
    
    console.log(chosenML)
    madlib.textcontent = chosenML
    
  }
  
  button.onclick = showWords

</script>
